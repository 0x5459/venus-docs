<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Standalone PoSter node | Venus Filecoin</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/assets/venus-logo.png">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-SMSDTMGLTV"></script>
    <script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-SMSDTMGLTV');</script>
    <meta name="description" content="Venus is a Go implementation of the Filecoin Distributed Storage Network.">
    
    <link rel="preload" href="/assets/css/0.styles.117964e0.css" as="style"><link rel="preload" href="/assets/js/app.1ee093ce.js" as="script"><link rel="preload" href="/assets/js/2.9fe70abb.js" as="script"><link rel="preload" href="/assets/js/39.4d02e01e.js" as="script"><link rel="prefetch" href="/assets/js/10.d962e848.js"><link rel="prefetch" href="/assets/js/100.54da93e3.js"><link rel="prefetch" href="/assets/js/101.c35ae5ca.js"><link rel="prefetch" href="/assets/js/102.c6c048c7.js"><link rel="prefetch" href="/assets/js/103.49b2d5f1.js"><link rel="prefetch" href="/assets/js/104.eca18679.js"><link rel="prefetch" href="/assets/js/105.82d1a874.js"><link rel="prefetch" href="/assets/js/106.ce53b821.js"><link rel="prefetch" href="/assets/js/107.e962066e.js"><link rel="prefetch" href="/assets/js/108.dd7f3fc8.js"><link rel="prefetch" href="/assets/js/109.24ccec9f.js"><link rel="prefetch" href="/assets/js/11.b093c25a.js"><link rel="prefetch" href="/assets/js/110.a5642ab8.js"><link rel="prefetch" href="/assets/js/111.5b4784d4.js"><link rel="prefetch" href="/assets/js/112.08fae251.js"><link rel="prefetch" href="/assets/js/113.94fbdda6.js"><link rel="prefetch" href="/assets/js/114.ce9b92d6.js"><link rel="prefetch" href="/assets/js/115.bdc0a1de.js"><link rel="prefetch" href="/assets/js/116.cb8865aa.js"><link rel="prefetch" href="/assets/js/117.b4e6e737.js"><link rel="prefetch" href="/assets/js/118.62a42a6b.js"><link rel="prefetch" href="/assets/js/119.63b100d2.js"><link rel="prefetch" href="/assets/js/12.15f4133a.js"><link rel="prefetch" href="/assets/js/120.bb5c14b1.js"><link rel="prefetch" href="/assets/js/121.f65665da.js"><link rel="prefetch" href="/assets/js/122.2432b469.js"><link rel="prefetch" href="/assets/js/123.b877e2d2.js"><link rel="prefetch" href="/assets/js/124.9b2c698d.js"><link rel="prefetch" href="/assets/js/125.2e1802f0.js"><link rel="prefetch" href="/assets/js/126.bbcd8135.js"><link rel="prefetch" href="/assets/js/127.bb7c7a81.js"><link rel="prefetch" href="/assets/js/128.fbf663e6.js"><link rel="prefetch" href="/assets/js/129.5091718d.js"><link rel="prefetch" href="/assets/js/13.cce019be.js"><link rel="prefetch" href="/assets/js/130.ef6dbd35.js"><link rel="prefetch" href="/assets/js/131.0a08bea3.js"><link rel="prefetch" href="/assets/js/132.5029178c.js"><link rel="prefetch" href="/assets/js/133.2fb1f046.js"><link rel="prefetch" href="/assets/js/134.97d33c36.js"><link rel="prefetch" href="/assets/js/135.31f4058c.js"><link rel="prefetch" href="/assets/js/136.ab10064b.js"><link rel="prefetch" href="/assets/js/137.18d149a7.js"><link rel="prefetch" href="/assets/js/138.63f3ab0a.js"><link rel="prefetch" href="/assets/js/139.6b6c71d5.js"><link rel="prefetch" href="/assets/js/14.718f94c7.js"><link rel="prefetch" href="/assets/js/140.fba78658.js"><link rel="prefetch" href="/assets/js/141.b1e44e65.js"><link rel="prefetch" href="/assets/js/142.2eca02f5.js"><link rel="prefetch" href="/assets/js/143.7d44b6ec.js"><link rel="prefetch" href="/assets/js/144.b3277bde.js"><link rel="prefetch" href="/assets/js/145.e1730bea.js"><link rel="prefetch" href="/assets/js/146.da6a5076.js"><link rel="prefetch" href="/assets/js/147.b159fe06.js"><link rel="prefetch" href="/assets/js/15.7cb42e1d.js"><link rel="prefetch" href="/assets/js/16.3d34bd17.js"><link rel="prefetch" href="/assets/js/17.4968233e.js"><link rel="prefetch" href="/assets/js/18.d755950f.js"><link rel="prefetch" href="/assets/js/19.404d3c6d.js"><link rel="prefetch" href="/assets/js/20.ae9d2d61.js"><link rel="prefetch" href="/assets/js/21.f103509b.js"><link rel="prefetch" href="/assets/js/22.9293c3a3.js"><link rel="prefetch" href="/assets/js/23.f919d9d1.js"><link rel="prefetch" href="/assets/js/24.9295e8b2.js"><link rel="prefetch" href="/assets/js/25.3f273904.js"><link rel="prefetch" href="/assets/js/26.f2db464c.js"><link rel="prefetch" href="/assets/js/27.3445cb7c.js"><link rel="prefetch" href="/assets/js/28.87ad6e9c.js"><link rel="prefetch" href="/assets/js/29.a2c584df.js"><link rel="prefetch" href="/assets/js/3.fbb4ca40.js"><link rel="prefetch" href="/assets/js/30.9369d5e9.js"><link rel="prefetch" href="/assets/js/31.07e404d1.js"><link rel="prefetch" href="/assets/js/32.896aefc4.js"><link rel="prefetch" href="/assets/js/33.35622fb6.js"><link rel="prefetch" href="/assets/js/34.3a057aee.js"><link rel="prefetch" href="/assets/js/35.7b25c620.js"><link rel="prefetch" href="/assets/js/36.45065e6a.js"><link rel="prefetch" href="/assets/js/37.c2f9c79e.js"><link rel="prefetch" href="/assets/js/38.9d945bb3.js"><link rel="prefetch" href="/assets/js/4.6058068b.js"><link rel="prefetch" href="/assets/js/40.dc5d94d9.js"><link rel="prefetch" href="/assets/js/41.0f3d42a0.js"><link rel="prefetch" href="/assets/js/42.c9822d1a.js"><link rel="prefetch" href="/assets/js/43.f2f60bd3.js"><link rel="prefetch" href="/assets/js/44.2160501c.js"><link rel="prefetch" href="/assets/js/45.2d8cdfd2.js"><link rel="prefetch" href="/assets/js/46.244fc276.js"><link rel="prefetch" href="/assets/js/47.23c9fb30.js"><link rel="prefetch" href="/assets/js/48.0d401ecc.js"><link rel="prefetch" href="/assets/js/49.3e4a3d27.js"><link rel="prefetch" href="/assets/js/5.983a6537.js"><link rel="prefetch" href="/assets/js/50.9af5b0d0.js"><link rel="prefetch" href="/assets/js/51.f9699dbb.js"><link rel="prefetch" href="/assets/js/52.ee32987e.js"><link rel="prefetch" href="/assets/js/53.51d89950.js"><link rel="prefetch" href="/assets/js/54.dc93965f.js"><link rel="prefetch" href="/assets/js/55.e473df9e.js"><link rel="prefetch" href="/assets/js/56.23b8d4ca.js"><link rel="prefetch" href="/assets/js/57.b834b467.js"><link rel="prefetch" href="/assets/js/58.25464d5c.js"><link rel="prefetch" href="/assets/js/59.65208f98.js"><link rel="prefetch" href="/assets/js/6.95de18b2.js"><link rel="prefetch" href="/assets/js/60.c5fc6af5.js"><link rel="prefetch" href="/assets/js/61.5b50f1a0.js"><link rel="prefetch" href="/assets/js/62.4a70ae3e.js"><link rel="prefetch" href="/assets/js/63.91ee1697.js"><link rel="prefetch" href="/assets/js/64.3fbc6dc1.js"><link rel="prefetch" href="/assets/js/65.f25f3f4f.js"><link rel="prefetch" href="/assets/js/66.0ae2e57e.js"><link rel="prefetch" href="/assets/js/67.a9a1544e.js"><link rel="prefetch" href="/assets/js/68.8627775e.js"><link rel="prefetch" href="/assets/js/69.207bf018.js"><link rel="prefetch" href="/assets/js/7.cd0044c1.js"><link rel="prefetch" href="/assets/js/70.b49f9939.js"><link rel="prefetch" href="/assets/js/71.c782dbb7.js"><link rel="prefetch" href="/assets/js/72.f7af227b.js"><link rel="prefetch" href="/assets/js/73.5bf0338d.js"><link rel="prefetch" href="/assets/js/74.1a6f9ba6.js"><link rel="prefetch" href="/assets/js/75.b016ccf6.js"><link rel="prefetch" href="/assets/js/76.d1a16398.js"><link rel="prefetch" href="/assets/js/77.f78cb969.js"><link rel="prefetch" href="/assets/js/78.0381c6bc.js"><link rel="prefetch" href="/assets/js/79.5367c7e7.js"><link rel="prefetch" href="/assets/js/8.cdad3814.js"><link rel="prefetch" href="/assets/js/80.47bb32fa.js"><link rel="prefetch" href="/assets/js/81.72fe0954.js"><link rel="prefetch" href="/assets/js/82.23048e4c.js"><link rel="prefetch" href="/assets/js/83.fa99e11d.js"><link rel="prefetch" href="/assets/js/84.a70e85ed.js"><link rel="prefetch" href="/assets/js/85.3633cb6f.js"><link rel="prefetch" href="/assets/js/86.b9ff507f.js"><link rel="prefetch" href="/assets/js/87.a54d7e7b.js"><link rel="prefetch" href="/assets/js/88.61894988.js"><link rel="prefetch" href="/assets/js/89.dde5908c.js"><link rel="prefetch" href="/assets/js/9.6b332ba7.js"><link rel="prefetch" href="/assets/js/90.c6bd4fc3.js"><link rel="prefetch" href="/assets/js/91.d1dcba7d.js"><link rel="prefetch" href="/assets/js/92.9f6107e5.js"><link rel="prefetch" href="/assets/js/93.2abc7a66.js"><link rel="prefetch" href="/assets/js/94.74d3ab20.js"><link rel="prefetch" href="/assets/js/95.3820f29e.js"><link rel="prefetch" href="/assets/js/96.7b70eb5c.js"><link rel="prefetch" href="/assets/js/97.69a06090.js"><link rel="prefetch" href="/assets/js/98.288112a3.js"><link rel="prefetch" href="/assets/js/99.191bfd34.js">
    <link rel="stylesheet" href="/assets/css/0.styles.117964e0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/venus-logo-title.svg" alt="Venus Filecoin" class="logo"> <span class="site-name can-hide">Venus Filecoin</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/intro/" class="nav-link">
  Introduction
</a></div><div class="nav-item"><a href="/cs/" class="nav-link">
  Chain Service
</a></div><div class="nav-item"><a href="/cluster/" class="nav-link router-link-active">
  Power Service
</a></div><div class="nav-item"><a href="/market/" class="nav-link">
  Deal Service
</a></div><div class="nav-item"><a href="/modules/" class="nav-link">
  Components
</a></div><div class="nav-item"><a href="/advanced/" class="nav-link">
  Advanced
</a></div><div class="nav-item"><a href="/operation/" class="nav-link">
  Operation
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cluster/poster.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/cluster/poster.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/intro/" class="nav-link">
  Introduction
</a></div><div class="nav-item"><a href="/cs/" class="nav-link">
  Chain Service
</a></div><div class="nav-item"><a href="/cluster/" class="nav-link router-link-active">
  Power Service
</a></div><div class="nav-item"><a href="/market/" class="nav-link">
  Deal Service
</a></div><div class="nav-item"><a href="/modules/" class="nav-link">
  Components
</a></div><div class="nav-item"><a href="/advanced/" class="nav-link">
  Advanced
</a></div><div class="nav-item"><a href="/operation/" class="nav-link">
  Operation
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cluster/poster.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/cluster/poster.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Introduction</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cluster/" aria-current="page" class="sidebar-link">Overview</a></li><li><a href="/cluster/architecture.html" class="sidebar-link">Architecture</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Deployment</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cluster/getting-started.html" class="sidebar-link">Getting started</a></li><li><a href="/cluster/venus-sector-manager-config.html" class="sidebar-link">venus-sector-manager config</a></li><li><a href="/cluster/venus-worker-config.html" class="sidebar-link">venus-worker config</a></li><li><a href="/cluster/processors-config-example.html" class="sidebar-link">Processors config example</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Operations</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cluster/task-flow.html" class="sidebar-link">Task flow</a></li><li><a href="/cluster/task-management.html" class="sidebar-link">Task management</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Other Features</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cluster/poster.html" aria-current="page" class="active sidebar-link">poster worker</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cluster/poster.html#proxy-node-mode" class="sidebar-link">Proxy node mode</a></li><li class="sidebar-sub-header"><a href="/cluster/poster.html#ext-prover-executor" class="sidebar-link">ext-prover executor</a></li><li class="sidebar-sub-header"><a href="/cluster/poster.html#deployment-practice" class="sidebar-link">Deployment Practice</a></li><li class="sidebar-sub-header"><a href="/cluster/poster.html#limitations" class="sidebar-link">Limitations</a></li></ul></li><li><a href="/cluster/snapdeal.html" class="sidebar-link">Snapdeal</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Migration</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cluster/migrate-sectors.html" class="sidebar-link">Import existing sectors</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="standalone-poster-node"><a href="#standalone-poster-node" class="header-anchor">#</a> Standalone PoSter node</h1> <p>In earlier versions, although <code>venus-sector-manager</code> already supports the <code>--poster</code>, <code>--miner</code> parameters of the <code>daemon run</code> command to select whether to enable the corresponding module, because the <code>post</code> attestation process is different from The strong correlation of sector positioning information makes it more limited and difficult to expand when it is actually used.</p> <p>From v0.2.0 onwards, we have provided a series of functional combinations that make easy-to-use, scalable standalone PoSter nodes an option for large-scale <code>SP</code>.</p> <p>Below, we will introduce these new feature points, and provide a practice to complete the deployment of independent PoSter nodes through these features. Subsequent documents use the node with <code>--poster</code> enabled as an example, and the independent <code>--miner</code> node operates in a similar manner, and will not be described separately.</p> <h2 id="proxy-node-mode"><a href="#proxy-node-mode" class="header-anchor">#</a> Proxy node mode</h2> <p>We know that for PoSter nodes, the most important capability is to obtain real-time and accurate sector positioning information. In the current <code>venus-sector-manager</code> version, we temporarily only provide metadata management based on the local embedded kv database.</p> <p>This allows data to be managed by only one process, and direct data sharing across processes is not possible.</p> <p>Therefore, we designed the proxy node mode to provide some metadata to other required nodes through the network interface, so as to realize data sharing.</p> <h3 id="how-to-use-the-proxy-node"><a href="#how-to-use-the-proxy-node" class="header-anchor">#</a> How to use the proxy node</h3> <p>We have added the <code>--proxy</code> parameter to the <code>daemon run</code> command. Its format is an address format like <code>{ip}:{port}</code>. When the startup command contains a valid <code>--proxy</code> parameter, the node will use another <code>venus-sector-manager</code> node pointed to by it as a data source and construct the necessary metadata (read-only) management module.</p> <p>In addition to <code>--proxy</code>, we also provide switches that control whether proxy mode is enabled for specific data management modules.</p> <p>Currently, we only provide the switch <code>--proxy-sector-indexer-off</code> for the time being. When <code>--proxy-sector-indexer-off</code> is enabled, nodes use the <code>SectorIndexer</code> database in their own data directory.</p> <p>For example, if started with the <code>venus-sector-manager daemon run --miner</code> command, there will be a <code>venus-sector-manager</code> listening on port <code>1789</code> using <code>~/.venus-sector-manager</code> as the data directory <code>sector-manager</code> instance with mining module enabled.</p> <p>At this time, we can use the following command to initialize and start a proxy node with the above instance as the data source on the same machine. This proxy node will use <code>~/.venus-sector-manager2</code> as the data directory and listen to <code>2789</code> port.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>venus-sector-manager --home ~/.venus-sector-manager2 daemon init
// maintain configuration files
venus-sector-manager --home ~/.venus-sector-manager2 daemon run --proxy<span class="token operator">=</span><span class="token string">&quot;127.0.0.1:1789&quot;</span> --listen<span class="token operator">=</span><span class="token string">&quot;:2789&quot;</span> --poster
</code></pre></div><p>The proxy node can provide the exact same and real-time sector location information as the source node.</p> <h3 id="the-agent-node-uses-the-existing-configuration-file"><a href="#the-agent-node-uses-the-existing-configuration-file" class="header-anchor">#</a> The agent node uses the existing configuration file</h3> <p>According to the method described in the previous section, we can start an agent node, but there is still a problem with this startup method: the configuration file of the agent node needs to be written again, or copied from the data directory of the source node. This introduces additional maintenance work, especially when configuration files may change frequently.</p> <p>For this, we also provide a <code>--conf-dir</code> parameter, which is in the form of a usable directory path. When the startup command includes a valid <code>--conf-dir</code> parameter, the node will use the configuration file that already exists in the specified directory as its own configuration file.</p> <p>This saves the work of writing and maintaining configuration files for different source and agent nodes on the same machine and serving the same set of clusters.</p> <p>Based on this function, the agent node startup method mentioned in the previous section can become:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>venus-sector-manager --home ~/.venus-sector-manager2 daemon run --proxy<span class="token operator">=</span><span class="token string">&quot;127.0.0.1:1789&quot;</span> --listen<span class="token operator">=</span><span class="token string">&quot;:2789&quot;</span> --conf-dir<span class="token operator">=</span><span class="token string">&quot;~/.venus-sector -manager&quot;</span> --poster
</code></pre></div><p>At this point, the source node and the agent node will use the same batch of configuration files.</p> <h2 id="ext-prover-executor"><a href="#ext-prover-executor" class="header-anchor">#</a> ext-prover executor</h2> <p>In addition to sharing sector information, another challenge faced by independent PoSter nodes is the utilization of hardware resources.</p> <p>Limited by the underlying algorithm library, computing nodes can only use GPUs in process units. This makes it difficult for PoSter nodes to effectively utilize the computing power of multiple GPUs, and it is also difficult to safely avoid proof timeouts when multiple <code>SPs</code> have conflicting <code>WindostPoSt</code> proof windows.</p> <p>For this, we provide an <code>ext-prover</code> mechanism similar to the <code>ext processor</code> in <code>venus-worker</code>.</p> <p>The <code>ext-prover</code> mechanism consists of two components:</p> <ol><li>The <code>--ext-prover</code> parameter of the <code>daemon run</code> command</li> <li>The <code>ext-prover.cfg</code> configuration file in the node data directory</li></ol> <p>A default <code>ext-prover.cfg</code> file looks like:</p> <div class="language-toml extra-class"><pre class="language-toml"><code><span class="token comment"># Default config:</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token table class-name">WdPost</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token comment">#Bin = &quot;venus-sector-manger&quot;</span>
<span class="token comment">#Args = [&quot;wdpost&quot;]</span>
<span class="token comment">#Concurrent = 1</span>
<span class="token comment">#Weight = 1</span>
<span class="token punctuation">[</span><span class="token table class-name">WdPost.Envs</span><span class="token punctuation">]</span>
<span class="token comment">#KEY = &quot;VAL&quot;</span>
<span class="token comment">#</span>
</code></pre></div><p>In recent versions, <code>daemon init</code> initializes the <code>ext-prover.cfg</code> file.</p> <p>Users can write their own, or copy the corresponding files from a data directory initialized by the latest version to an existing data directory.</p> <p>The functions of the configuration items in <code>ext-prover.cfg</code> are very similar to the configuration blocks in <code>venus-worker</code>, and users can refer to the corresponding documents for reference.</p> <p>When the <code>--ext-prover</code> parameter is included in the start command of <code>venus-sector-manager</code>, the node will use the <code>ext-prover.cfg</code> configuration file in the configuration directory as the basis for starting child processes. For this configuration file, setting the <code>--conf-dir</code> parameter will also have an effect.</p> <p>When users see logs like this, <code>ext-prover</code> is ready.</p> <div class="language- extra-class"><pre class="language-text"><code>2022-04-27T19:15:00.441+0800 INFO porver-ext ext/prover.go:122 response loop start {&quot;pid&quot;: 24764, &quot;ppid&quot;: 24732, &quot;loop&quot;: &quot;resp&quot;}
2022-04-27T19:15:00.441+0800 INFO porver-ext ext/prover.go:155 request loop start {&quot;pid&quot;: 24764, &quot;ppid&quot;: 24732, &quot;loop&quot;: &quot;req&quot;}
2022-04-27T19:15:00.468+0800 INFO processor-cmd processor/processor.go:35 ready {&quot;pid&quot;: 24764, &quot;ppid&quot;: 24732, &quot;proc&quot;: &quot;wdpost&quot;}
</code></pre></div><h2 id="deployment-practice"><a href="#deployment-practice" class="header-anchor">#</a> Deployment Practice</h2> <p>Suppose we have a node machine configured with 8 GPUs, then we can provide stronger proof-of-time processing capabilities through the following configuration.</p> <ol><li><p>Configure and start the source node</p> <div class="language- extra-class"><pre class="language-text"><code>venus-sector-manager daemon run --miner
</code></pre></div><p>At this time, the source node only provides functions and capabilities related to encapsulation;</p></li> <li><p>Configure the <code>ext-prover.cfg</code> file:</p> <div class="language-toml extra-class"><pre class="language-toml"><code><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token table class-name">WdPost</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token table class-name">WdPost.Envs</span><span class="token punctuation">]</span>
<span class="token key property">CUDA_VISIBLE_DEVICES</span> <span class="token punctuation">=</span> <span class="token string">&quot;0&quot;</span>
<span class="token key property">TMPDIR</span> <span class="token punctuation">=</span> <span class="token string">&quot;/tmp/ext-prover0/&quot;</span>

<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token table class-name">WdPost</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token table class-name">WdPost.Envs</span><span class="token punctuation">]</span>
<span class="token key property">CUDA_VISIBLE_DEVICES</span> <span class="token punctuation">=</span> <span class="token string">&quot;1&quot;</span>
<span class="token key property">TMPDIR</span> <span class="token punctuation">=</span> <span class="token string">&quot;/tmp/ext-prover1/&quot;</span>

<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token table class-name">WdPost</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token table class-name">WdPost.Envs</span><span class="token punctuation">]</span>
<span class="token key property">CUDA_VISIBLE_DEVICES</span> <span class="token punctuation">=</span> <span class="token string">&quot;2&quot;</span>
<span class="token key property">TMPDIR</span> <span class="token punctuation">=</span> <span class="token string">&quot;/tmp/ext-prover2/&quot;</span>

<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token table class-name">WdPost</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token table class-name">WdPost.Envs</span><span class="token punctuation">]</span>
<span class="token key property">CUDA_VISIBLE_DEVICES</span> <span class="token punctuation">=</span> <span class="token string">&quot;3&quot;</span>
<span class="token key property">TMPDIR</span> <span class="token punctuation">=</span> <span class="token string">&quot;/tmp/ext-prover3/&quot;</span>

<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token table class-name">WdPost</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token table class-name">WdPost.Envs</span><span class="token punctuation">]</span>
<span class="token key property">CUDA_VISIBLE_DEVICES</span> <span class="token punctuation">=</span> <span class="token string">&quot;4&quot;</span>
<span class="token key property">TMPDIR</span> <span class="token punctuation">=</span> <span class="token string">&quot;/tmp/ext-prover4/&quot;</span>

<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token table class-name">WdPost</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token table class-name">WdPost.Envs</span><span class="token punctuation">]</span>
<span class="token key property">CUDA_VISIBLE_DEVICES</span> <span class="token punctuation">=</span> <span class="token string">&quot;5&quot;</span>
<span class="token key property">TMPDIR</span> <span class="token punctuation">=</span> <span class="token string">&quot;/tmp/ext-prover5/&quot;</span>

<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token table class-name">WdPost</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token table class-name">WdPost.Envs</span><span class="token punctuation">]</span>
<span class="token key property">CUDA_VISIBLE_DEVICES</span> <span class="token punctuation">=</span> <span class="token string">&quot;6&quot;</span>
<span class="token key property">TMPDIR</span> <span class="token punctuation">=</span> <span class="token string">&quot;/tmp/ext-prover6/&quot;</span>

<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token table class-name">WdPost</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token table class-name">WdPost.Envs</span><span class="token punctuation">]</span>
<span class="token key property">CUDA_VISIBLE_DEVICES</span> <span class="token punctuation">=</span> <span class="token string">&quot;7&quot;</span>
<span class="token key property">TMPDIR</span> <span class="token punctuation">=</span> <span class="token string">&quot;/tmp/ext-prover7/&quot;</span>

</code></pre></div></li> <li><p>Initialize and start a standalone <code>PoSter</code> node</p> <div class="language-bash extra-class"><pre class="language-bash"><code>venus-sector-manager --home<span class="token operator">=</span>~/.venus-individual-poster daemon init
venus-sector-manager --home<span class="token operator">=</span>~/.venus-individual-poster daemon run --proxy<span class="token operator">=</span><span class="token string">&quot;127.0.0.1:1789&quot;</span> --poster --listen<span class="token operator">=</span><span class="token string">&quot;:2789&quot;</span> --conf-dir<span class="token operator">=</span><span class="token string">&quot;~/ .venus-sector-manager&quot;</span> --ext-prover
</code></pre></div></li></ol> <p>In this way of deployment,</p> <ul><li>The source node provides both packaging and mining support</li> <li>Proxy nodes provide WindowPoSt support
<ul><li>The agent node enables ext-prover, and each child process independently uses a GPU and a computing lock directory</li></ul></li></ul> <p>There is no conflict between winning post and window post due to device usage</p> <h2 id="limitations"><a href="#limitations" class="header-anchor">#</a> Limitations</h2> <p>So far, we have explained the functions, principles and simple usage examples that stand-alone <code>PoSter</code> nodes rely on.</p> <p>However, this mode still has some limitations for very large <code>SP</code> clusters, which are embodied in:</p> <ul><li>Unless the configuration is split so that each <code>PoSter</code> node only provides proof-of-time support for some miners, it is difficult to provide horizontal scalability across machines;</li> <li>The scheduling of the time-space proof and the serious conflict in the proof window period still need to rely on the deployment at the operation and maintenance level to a certain extent;</li></ul> <p>In general, the above limitations rely on a fully de-stateful, distributed venus-sector-manager implementation, which is one of the directions we will focus on in the future.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/filecoin-project/venus-docs/edit/master/docs/cluster/poster.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">7/5/2022, 5:20:51 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/cluster/task-management.html" class="prev">
        Task management
      </a></span> <span class="next"><a href="/cluster/snapdeal.html">
        Snapdeal
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1ee093ce.js" defer></script><script src="/assets/js/2.9fe70abb.js" defer></script><script src="/assets/js/39.4d02e01e.js" defer></script>
  </body>
</html>
