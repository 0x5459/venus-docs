# How to start a test network

This document takes building a 2k private network as an example.

## Necessary environment

Based on CentOS 7.* :
```
yum install epel-release -y
yum install ocl-icd-devel -y
yum install opencl-headers -y
yum install hwloc
yum install jq -y 
```
During the process, there is a prompt to install any components.

## Generating node

1. Generate pre-seal files and data
   
    ```sh
        ./venus seed pre-seal --sector-size 2048 --num-sectors 2
        ./venus seed genesis new localnet.json
        ./venus seed genesis add-miner localnet.json ~/.genesis-sectors/pre-seal-t01000.json
    ```

2. Start daemon
   
   ```sh
        ./venus daemon --make-genesis=devgen.car --genesis-template=localnet.json --network=2k
        # Set wallet password
        ./venus wallet set-password <password>
        ./venus wallet import ~/.genesis-sectors/pre-seal-t01000.key
        # After restarting the deamon, you need to unlock the wallet
        ./venus wallet unlock [--] [<password>]
   ```
   
3. Initialize miner
   
    ```sh
        # init sealer
        ./venus-sealer init --genesis-miner --actor=t01000 --sector-size=2048 --pre-sealed-sectors=~/.genesis-sectors --pre-sealed-metadata=~/.genesis-sectors/pre-seal-t01000.json --nosync --network=2k
        # init miner, one program can be responsible for mining of multiple miners (joint mining)
        ./venus-miner init
   ```
4. Start service of Genesis Miners

    ```sh
        # Start the sealing service
        ./venus-sealer run --nosync
        # Start the mining service
        ./venus-miner run --nosync
        # Add the miner, start mining
        cat .venussealer/api  -> /ip4/127.0.0.1/tcp/2345/http
        cat .venussealer/token -> export TOKEN
        ./venus-miner address add --addr=t01000 --listen-api=/ip4/[sealer_ip]/tcp/2345/http --token=$TOKEN
        # miner list
        ./venus-miner address list
    ```

## Start venus normal node

   ```sh
        # first start, devgen.car is generated by the genesis node
        ./venus daemon --genesisfile=devgen.car --network=2k --offline=true

        # other
        ./venus daemon --network=2k --offline=true
   ```

## Generate normal miner

    ```sh
        # Create a wallet
        ./venus wallet new
        # Transfer, execute in genesis node
        ./venus send $WALLET_T3_ADDR --value=[value]
        # query
        ./venus wallet balance $WALLET_T3_ADDR
        # generate normal miner
        ./venus-sealer init --owner=$WALLET_T3_ADDR --worker=$WALLET_T3_ADDR --sector-size=2048 --nosync
    ```

## Start service of normal node

   ```sh
        # start sealing service
        ./venus-sealer run --nosync
        # seal once
        ./venus-sealer sectors pledge
        # start mining service, execute commands on the started miner node
        ./venus-miner address add --addr=<miner> --listen-api=/ip4/[sealer_ip]/tcp/2345/http --token=<sealer_token>
   ```

[Edit this page](https://github.com/filecoin-project/venus-docs/blob/master/docs/How-to-setup_2knet.md) on GitHub or [open an issue](https://github.com/filecoin-project/venus-docs/issues)
   