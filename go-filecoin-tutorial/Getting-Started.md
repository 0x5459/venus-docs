# Getting started

This is a step-by-step guide for installing and running a Filecoin node connected to the [User&nbsp;Devnet](Devnets#user) on your computer. Subsequent tutorials explain how to [mine Filecoin](Mining-Filecoin) or [store data](Storing-on-Filecoin) with your node.

## Table of contents

* [System requirements](#system-requirements)
* [Installing dependencies and system configuration](#installing-dependencies-and-system-configuration)
* [Building Filecoin and running tests](#building-filecoin-and-running-tests)
* [Start running Filecoin](#start-running-filecoin)
* [Name your Filecoin node](#name-your-filecoin-node)
* [Start streaming activity from your node](#start-streaming-activity-from-your-node)
* [Get FIL from the Filecoin faucet](#get-fil-from-the-filecoin-faucet)
* [Wait for chain sync](#wait-for-chain-sync)

### System requirements

Go-filecoin can build and run on most Linux and MacOS systems. 
Windows is not yet supported.

A validating node can run on most systems with at least 8GB of RAM. 
A mining node requires significant RAM and GPU resources, depending on the sector configuration to be used.

### Installing dependencies and system configuration

Clone this git repository to your machine and enter it:

```sh
mkdir -p /path/to/filecoin-project
git clone https://github.com/filecoin-project/go-filecoin.git /path/to/filecoin-project/go-filecoin
```

#### Installing Go

The build process for go-filecoin requires [Go](https://golang.org/doc/install) >= v1.13

> Installing Go for the first time? We recommend [this tutorial](https://www.ardanlabs.com/blog/2016/05/installing-go-and-your-workspace.html) which includes environment setup.

Due to our use of `cgo`, you'll need a C compiler to build go-filecoin whether you're using a prebuilt library or it yourself from source. 
If you want to use `gcc` (e.g. `export CC=gcc`) when building go-filecoin, you will need to use v7.4.0 or higher.

The build process will download a static library containing the [Filecoin proofs implementation](https://github.com/filecoin-project/rust-fil-proofs) (which is written in Rust).

> If instead you wish to build proofs from source, you'll need (1) Rust development environment and (2) to set the environment variable `FFI_BUILD_FROM_SOURCE=1`.
More info at [filecoin-ffi](https://github.com/filecoin-project/filecoin-ffi).

#### Installing dependencies

First, load all the Git submodules.

```sh
git submodule update --init --recursive
```

Initialize build dependencies.

```sh
make deps
```

Note: The first time you run `deps` can be **slow** as very large parameter files are either downloaded or generated locally in `/var/tmp/filecoin-proof-parameters`.
Have patience; future runs will be faster.

### Building Filecoin and running tests
From inside your newly cloned Filecoin directory, issue the following commands:

```sh
# First, build the binary
make

# Then, run the unit tests.
go run ./build test

# Build and test can be combined!
go run ./build best
```

Other handy build commands include:

```sh
# Check the code for style and correctness issues
go run ./build lint

# Run different categories of tests by toggling their flags
go run ./build test -unit=false -integration=true -functional=true

# Test with a coverage report
go run ./build test -cover

# Test with Go's race-condition instrumentation and warnings (see https://blog.golang.org/race-detector)
go run ./build test -race

# Deps, Lint, Build, Test (any args will be passed to `test`)
go run ./build all
```

> **NOTICE:** Any flag passed to `go run ./build test` (e.g. `-cover`) will be passed on to `go test`.

If you have **problems with the build**, please consult the [Troubleshooting](https://go.filecoin.io/go-filecoin-tutorial/Troubleshooting-&-FAQ.html) section of this documentation.

## Start running Filecoin

1. If you have run go-filecoin before, remove existing Filecoin repo (**this will delete all previous filecoin data**):
    ```sh
    rm -rf ~/.filecoin
    ```

1. Initialize go-filecoin. The `--devnet-user` flag connects you to our main devnet:
    ```sh
    go-filecoin init --devnet-user --genesisfile=https://genesis.user.kittyhawk.wtf/genesis.car
    ```

1. Start your go-filecoin daemon:
    ```sh
    go-filecoin daemon
    ```
    This should return "My peer ID is `<peerID>`", where `<peerID>` is a long [CID](https://github.com/filecoin-project/specs/blob/master/definitions.md#cid) string starting with "Qm".

 > **NOTICE:** This can be **slow** the first time. The filecoin node needs a large parameter file for proofs, stored in `/tmp/filecoin-proof-parameters`. It's usually generated by the `deps` build step. If these files are missing they will be regenerated, which can take up to an hour. We are working on a better solution.

1. Check your connectivity:
    ```sh
    go-filecoin swarm peers                  # lists addresses of peers to which you're connected
    ```
    The last segment of a peer's address is its `peerID`. Test your connection directly to a peer with:
    ```sh
    go-filecoin ping <peerID>                # Pings the peer and displays round-trip latency.
    ```

#### Quick start:

```sh
# Remove any existing symlink to a repo directory
rm ~/.filecoin

# Initialize a new repository, downloading a genesis file and setting network parameters (in this case, for the Testnet network)
go-filecoin init --genesisfile=https://ipfs.io/ipfs/QmXZQeezX1x8uRQX9EUaYxnyivUpTfJqQTvszk3c8SnFPN/testnet.car --network=testnet

# Start the daemon
go-filecoin daemon

# Print a list of bootstrap node addresses
go-filecoin config bootstrap.addresses

# Choose any address from the list you just printed, and connect to it (Automatic peer discovery and connection coming soon.)
go-filecoin swarm connect <any-filecoin-node-mulitaddr>
```
Your node should now be connected to some peers and will begin downloading and validating the blockchain.

ðŸŽ‰ Woohoo! You are now running a Filecoin node and connected to the network. This is the anatomy of a basic node:
![Diagram of a single node and its components](./images/getting-started-node-diagram.png)

_Note: The daemon is now running indefinitely in its own Terminal (`Ctrl + C` to quit). To run other `go-filecoin` commands, you'll need to open a second Terminal tab or window (`Cmd + T` on Mac)._

_Need help? See [Troubleshooting & FAQ](Troubleshooting-&-FAQ) or [#fil-dev on Matrix chat](https://riot.im/app/#/room/#fil-dev:matrix.org)._

## Name your Filecoin node

By default, nodes are referenced by long, alphanumeric node IDs. You can give your node a human-readable nickname.
* Nicknames can only contain letter characters (no numbers, spaces, or other special characters).

1. Open a new Terminal window and set your node nickname (replace `Pizzanode` with the name of your choice): 
    ```sh
    go-filecoin config heartbeat.nickname "Pizzanode"
    ````
1. The new name takes effect immediately, no need to restart. You can check the configured name with:
    ```sh
    go-filecoin config heartbeat.nickname
    ````

## Start streaming activity from your node

We have a few visualization tools to understand what's happening on the Filecoin network: the [Network Stats](https://stats.kittyhawk.wtf/) and [block explorer](Block-Explorer). 

To see your node on the network stats, you'll need to opt in to streaming your node's logs. Open a new Terminal window and run:
```sh
go-filecoin config heartbeat.beatTarget "/dns4/backend-stats.kittyhawk.wtf/tcp/8080/ipfs/QmUWmZnpZb6xFryNDeNU7KcJ1Af5oHy7fB9npU67sseEjR"
```
Restart the currently running `go-filecoin daemon` process and then go to the [Network Stats](https://stats.kittyhawk.wtf/) and watch your node reach consensus with the rest of the network.

## Wait for chain sync
ðŸŽ‰ Congrats, you're now connected to Filecoin! Your daemon is now busy syncing and validating the existing blockchain, which can take awhile -- hours or even days depending on network age and activity.

During this time, you'll observe intense activity on one CPU core. Find out what the current block height is first by visiting the [Network Stats Page](https://stats.kittyhawk.wtf/). Then you can watch your node's syncing progress:
````sh
watch -n 10 'go-filecoin show block $(go-filecoin chain head | head -n 1)'
# Mac users will need to install watch first: brew install watch
````

## Get FIL from the Filecoin faucet

**Once your chain has finished syncing**, you will be able to use the faucet to get filecoin tokens (FIL). Before Filecoin nodes can participate in the marketplace, they will need some start-up FIL. Clients need FIL in their accounts to make storage deals with miners. Miners use FIL for collateral when initially pledging storage to the network.

During early testing, you can obtain mock FIL from the Filecoin faucet. The "faucet" is thusly named because it drips (or pours) FIL into those who stick their wallets under it. Using mock FIL allows for preliminary testing of market dynamics without the requirement for any money to actually change hands.

All balances of FIL are stored in wallets. When a node is newly created, it will have a Filecoin wallet with a balance of 0 FIL.
1. Let's get you some FIL. Get your wallet address:
    ```sh
    go-filecoin address ls
    ```
1. The output should be a long alphanumeric string. Go to the User Devnet faucet at [http://user.kittyhawk.wtf:9797](http://user.kittyhawk.wtf:9797) and submit that wallet address. It will take a minute for the FIL to land in your wallet.

    1. Alternatively, you can tap the faucet from the command line:
        ```sh
        export WALLET_ADDR=`go-filecoin address ls`    # fetch your wallet address into a handy variable
        MESSAGE_CID=`curl -X POST -F "target=${WALLET_ADDR}" "http://user.kittyhawk.wtf:9797/tap" | cut -d" " -f4`
        ```
1. The faucet will provide you with a message CID. If your chain is already synced with the network, this message should be processed in about 30 seconds. You can run the following command to wait for confirmation:

    ```sh
    go-filecoin message wait ${MESSAGE_CID}
    ```

1. To verify that the FIL has landed in your wallet, check your wallet balance:
    ```sh
    go-filecoin wallet balance ${WALLET_ADDR}
    ```

After syncing is complete, you can begin mining or storing data on the Filecoin network! Choose your adventure: 
- [Mining Filecoin](Mining-Filecoin)
- [Storing Data](Storing-on-Filecoin)
